(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-697bc9e5"],{3565:function(t,e,a){},3967:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"basic-info"},[a("div",{staticClass:"container info-content"},[a("porotrait"),a("div",{staticClass:"info-fans clearfix"},[a("div",{staticClass:"info-fans-list"},[a("p",[t._v("关注")]),a("p",[t._v(t._s(t.follower_num))])]),a("div",{staticClass:"info-fans-list"},[a("p",[t._v("粉丝")]),a("p",[t._v(t._s(t.followed_num))])]),a("div",{staticClass:"info-fans-list"},[a("p",[t._v("获赞")]),a("p",[t._v(t._s(t.star_num))])])]),a("div",{staticClass:"info-box"},[a("div",{staticClass:"info-list"},[t._v(" 账号： "),a("el-input",{attrs:{disabled:""},model:{value:t.userinfo.phone,callback:function(e){t.$set(t.userinfo,"phone",e)},expression:"userinfo.phone"}})],1),a("div",{staticClass:"info-list"},[t._v(" 姓名： "),a("el-input",{model:{value:t.userinfo.name,callback:function(e){t.$set(t.userinfo,"name",e)},expression:"userinfo.name"}})],1),a("div",{staticClass:"info-list"},[t._v(" 昵称： "),a("el-input",{model:{value:t.userinfo.nickname,callback:function(e){t.$set(t.userinfo,"nickname",e)},expression:"userinfo.nickname"}})],1),a("el-button",{on:{click:t.changeinfo}},[t._v("修改信息")])],1)],1)])},s=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"footerBtn"},[a("img",{staticClass:"btn-edit",attrs:{src:t.img,icon:"el-icon-edit"},on:{click:function(e){t.dialogVisible=!0}}}),t.attach.laterUrl?a("img",{staticClass:"preview",staticStyle:{width:"200px",height:"200px"},attrs:{src:t.attach.laterUrl}}):t._e(),a("el-dialog",{attrs:{title:"编辑头像",visible:t.dialogVisible,"before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",[a("el-row",[a("input",{staticClass:"el-button",staticStyle:{"margin-bottom":"15px"},attrs:{type:"file",id:"uploads",accept:"image/png, image/jpeg, image/gif, image/jpg"},on:{change:function(e){return t.uploadImg(e,1)}}})]),a("el-row",[a("el-col",{attrs:{span:16}},[a("vueCropper",{ref:"cropper",staticStyle:{width:"100%",height:"300px"},attrs:{img:t.attach.customaryUrl,autoCrop:t.options.autoCrop,fixedBox:t.options.fixedBox,canMoveBox:t.options.canMoveBox,autoCropWidth:t.options.autoCropWidth,autoCropHeight:t.options.autoCropHeight,centerBox:t.options.centerBox,fixed:t.options.fixed},on:{realTime:t.realTime}})],1),a("el-col",{attrs:{span:8}},[a("h2",{attrs:{align:"center"}},[t._v("头像预览")]),a("div",{staticClass:"show-preview"},[a("div",{staticClass:"preview",style:t.previews.div},[a("img",{style:t.previews.img,attrs:{src:t.previews.url}})])])])],1),a("el-row",{staticClass:"footerBtn",attrs:{align:"center"}},[a("el-button",{staticClass:"btn-content",attrs:{type:"primary",size:"small",round:""},on:{click:function(e){return t.cut("blob")}}},[t._v("确认")]),a("el-button",{staticClass:"btn-content",attrs:{type:"primary",size:"small",round:""},on:{click:t.handleClose}},[t._v("取消")])],1)],1)])],1)},n=[],r=a("7e79"),l=a("365c"),c={components:{VueCropper:r["VueCropper"]},data(){return{img:a("d8d7"),dialogVisible:!1,options:{autoCrop:!0,fixedBox:!1,canMoveBox:!0,autoCropWidth:200,autoCropHeight:200,centerBox:!1,fixed:!0},previews:{},attach:{id:"",userId:"",customaryUrl:"",laterUrl:"",attachType:"photo"},fileName:"",uploadImgRelaPath:""}},methods:{handleClose(){this.dialogVisible=!1},realTime(t){this.previews=t},uploadImg(t,e){var a=t.target.files[0];if(!/\.(gif|jpg|jpeg|png|bmp|GIF|JPG|PNG)$/.test(t.target.value))return this.$message.error("图片类型必须是.gif,jpeg,jpg,png,bmp中的一种"),!1;var i=new FileReader;i.readAsDataURL(a),i.onload=t=>{let e=t.target.result;this.attach.customaryUrl=e}},cut(t){let e=localStorage.getItem("token");this.$refs.cropper.getCropData(t=>{l["a"].upimg({type:"img",data:{user_id:e,base64:t}}).then(t=>{0==t.data.status&&this.$router.go(0)})})}},created(){let t=localStorage.getItem("token");l["a"].loadimg({type:"img",data:{user_id:t}}).then(t=>{this.img=t.data.data.base64})}},u=c,p=(a("5773"),a("2877")),d=Object(p["a"])(u,o,n,!1,null,"0004a46b",null),f=d.exports,m=(a("3565"),{components:{porotrait:f},data(){return{followed_num:0,follower_num:0,star_num:0,userinfo:{user:"作者1",phone:"游客账号",name:"游客姓名",nickname:"游客昵称"}}},methods:{changeinfo(){let t=localStorage.getItem("token"),e={user_id:t,real_name:this.userinfo.name,nick_name:this.userinfo.nickname};l["a"].infoChange({type:"modify",data:e}).then(t=>{0==t.data.status?this.$message({message:"修改成功",type:"success",offset:100}):this.$message({message:"修改失败",type:"error",offset:100})},t=>{})}},created(){let t=localStorage.getItem("token");l["a"].infoSearch({type:"user_info",data:{user_id:t}}).then(t=>{let e=t.data.data;this.userinfo.phone=e.phone,this.userinfo.name=e.real_name,this.userinfo.nickname=e.nick_name},t=>{console.log(t)}),l["a"].getinfo({type:"followed_num",data:{user_id:t}}).then(t=>{this.followed_num=t.data.data.num}),l["a"].getinfo({type:"follower_num",data:{user_id:t}}).then(t=>{this.follower_num=t.data.data.num}),l["a"].getinfo({type:"star_num",data:{user_id:t}}).then(t=>{this.star_num=t.data.data.num})}}),g=m,h=Object(p["a"])(g,i,s,!1,null,null,null);e["default"]=h.exports},5773:function(t,e,a){"use strict";var i=a("dd42"),s=a.n(i);s.a},d8d7:function(t,e,a){t.exports=a.p+"img/test.ecdbc70c.jpg"},dd42:function(t,e,a){}}]);