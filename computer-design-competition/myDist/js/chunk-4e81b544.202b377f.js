(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e81b544"],{"106a":function(t,e,s){"use strict";var a=s("2a7e"),i=s.n(a);i.a},"2a7e":function(t,e,s){},"51b5":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"message"},[s("div",{staticClass:"container clearfix"},[s("aside",{staticClass:"message-kind"},[s("ul",[t._m(0),s("li",{class:{active:"snotice"==t.messageKind},on:{click:function(e){return t.chooseMessageKind("snotice")}}},[t._v("系统通知")]),s("li",{class:{active:"privateMessage"==t.messageKind},on:{click:function(e){return t.chooseMessageKind("privateMessage")}}},[t._v("私信")]),s("li",{class:{active:"notice"==t.messageKind},on:{click:function(e){return t.chooseMessageKind("notice")}}},[t._v("公告")])])]),s("div",{staticClass:"message-box"},["snotice"==t.messageKind?s("s-notice"):t._e(),"privateMessage"==t.messageKind?s("private-message"):t._e(),"notice"==t.messageKind?s("notice"):t._e()],1)])])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"message-center"},[s("i",{staticClass:"el-icon-s-promotion"}),t._v("消息中心")])}],n=(s("6af5"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"notice"},[s("div",{staticClass:"inner"},[s("div",{staticClass:"innerbox"},[s("h1",[t._v("系统通知")]),t._l(t.noticeArray,(function(e,a){return s("div",{key:a,staticClass:"notice-tpl"},[t._v(" "+t._s(e.msg_content)+" ")])}))],2)])])}),c=[],r=s("365c"),o={data(){return{noticeArray:[]}},created(){let t=localStorage.getItem("token");r["a"].getmsg({type:"msg",data:{sender_id:"88888888",recever_id:t}}).then(t=>{console.log(t),this.noticeArray=t.data.data})}},d=o,l=(s("85c6"),s("2877")),m=Object(l["a"])(d,n,c,!1,null,"a6fe5a16",null),g=m.exports,u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"private-message clearfix"},[s("div",{staticClass:"msg-list inner"},[s("div",{staticClass:"msg-near"},[t._v("近期消息")]),s("div",{staticClass:"innerbox"},[s("div",{staticClass:"msg-tpl-box"},t._l(t.msgList,(function(e,a){return s("div",{key:a,staticClass:"msg-list-tpl",class:{active:t.thisIndex==e.msgid},on:{click:function(s){return t.changeIndex(e.msgid)}}},[s("img",{attrs:{src:e.img,alt:""}}),s("div",{staticClass:"talker"},[s("h3",[t._v(t._s(e.msgAuthorName))]),s("p",{domProps:{innerHTML:t._s(e.content)}})])])})),0)])]),s("div",{staticClass:"msg-content clearfix"},[s("div",{staticClass:"msg-content-head"},[t._v(t._s(t.otheruser))]),s("div",{staticClass:"msg-content-content"},[s("div",{staticClass:"inner"},[s("div",{staticClass:"innerbox"},t._l(t.conversation,(function(e,a){return s("div",{key:a},[""!=e.msg_content?[e.sender_id==t.token?s("img",{attrs:{src:t.mybase64,alt:""}}):e.sender_id==t.thisIndex?s("img",{attrs:{src:t.otherbase64,alt:""}}):t._e(),e.sender_id==t.token?s("span",[t._v(t._s(t.user))]):t._e(),e.sender_id==t.thisIndex?s("span",[t._v(t._s(t.otheruser))]):t._e(),s("div",{staticClass:"msg-content-box",domProps:{innerHTML:t._s(e.msg_content)}})]:t._e()],2)})),0)])]),s("div",{staticClass:"msg-write"},[s("wangeditor",{staticClass:"wangeditor",attrs:{isClear:t.isClear},model:{value:t.detail,callback:function(e){t.detail=e},expression:"detail"}})],1),s("el-button",{staticClass:"msg-btn",on:{click:t.send}},[t._v("发送")])],1)])},_=[],h=(s("9608"),s("3019")),v={components:{wangeditor:h["a"]},data(){return{user:"",otheruser:"",img:"",detail:"",isClear:!1,thisIndex:"",token:"",mybase64:"",otherbase64:"",conversation:[],msgList:[]}},methods:{send(t){let e=localStorage.getItem("token");r["a"].sendmsg({type:"msg",data:{sender_id:e,recever_id:this.thisIndex,content:this.detail,title:""}}).then(t=>{if(0==t.data.status){let t={img:this.base64,msg_content:this.detail,sender_id:e};this.conversation.push(t),this.detail=""}})},changeIndex(t){let e=localStorage.getItem("token");this.thisIndex=t,r["a"].getmsg({type:"msg",data:{sender_id:t,recever_id:e}}).then(t=>{this.conversation=t.data.data}),r["a"].infoSearch({type:"user_info",data:{user_id:t}}).then(t=>{this.otheruser=t.data.data.nick_name}),r["a"].loadimg({type:"img",data:{user_id:t}}).then(t=>{this.otherbase64=t.data.data.base64})}},created(){let t=localStorage.getItem("token");this.token=t,r["a"].loadimg({type:"img",data:{user_id:t}}).then(t=>{this.mybase64=t.data.data.base64}),r["a"].getmsgList({type:"msg",data:{user_id:t}}).then(t=>{let e=localStorage.getItem("token"),s=t.data.data.id_list.filter((function(t,e,s){return"88888888"!=t})),a=s.map((function(t,s,a){let i={};return i.msgid=t,r["a"].infoSearch({type:"user_info",data:{user_id:t}}).then(t=>{i.msgAuthorName=t.data.data.nick_name}),r["a"].loadimg({type:"img",data:{user_id:t}}).then(t=>{i.img=t.data.data.base64}),r["a"].lastestmsg({type:"msg",data:{sender_id:e,recever_id:t}}).then(t=>{i.content=t.data.content}),i}));this.thisIndex=a[0].msgid,r["a"].infoSearch({type:"user_info",data:{user_id:e}}).then(t=>{this.user=t.data.data.nick_name});var i=this;setTimeout((function(){i.msgList=a,i.changeIndex(i.thisIndex)}),500)})}},f=v,p=Object(l["a"])(f,u,_,!1,null,null,null),C=p.exports,b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"notice"},[s("div",{staticClass:"inner"},[s("div",{staticClass:"innerbox"},[s("h1",[t._v("公告")]),t._l(t.noticeArray,(function(e,a){return s("div",{key:a,staticClass:"notice-tpl"},[t._v(" "+t._s(e.notice)+" ")])}))],2)])])},k=[],x={data(){return{noticeArray:[{notice:"欢迎来到智能化组队系统，您可以在这里寻找志同道合的人组成团队"},{notice:"计算机设计大赛即将举行，有兴趣的同学可以组队参加"}]}}},y=x,I=(s("106a"),Object(l["a"])(y,b,k,!1,null,"14794480",null)),K=I.exports,M={components:{privateMessage:C,sNotice:g,notice:K},data(){return{messageKind:"privateMessage"}},methods:{chooseMessageKind(t){this.messageKind=t}},created(){this.messageKind=this.$route.params.messageKind}},w=M,S=Object(l["a"])(w,a,i,!1,null,null,null);e["default"]=S.exports},"6af5":function(t,e,s){},"85c6":function(t,e,s){"use strict";var a=s("8f34"),i=s.n(a);i.a},"8f34":function(t,e,s){},9608:function(t,e,s){}}]);