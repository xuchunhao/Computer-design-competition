(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1cc7e4de"],{"57bd":function(t,a,o){},b70c:function(t,a,o){"use strict";o.r(a);var e=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"blog-each"},[o("div",{staticClass:"container clearfix"},[o("aside",{staticClass:"blog-header"},[o("div",{staticClass:"blog-writer"},[o("img",{attrs:{src:t.writerimg,alt:""}}),o("h3",[t._v(t._s(t.writerinfo.nick_name))])]),o("div",{staticClass:"blog-writer-info"},[o("div",{staticClass:"blog-writer-list"},[o("p",[t._v("关注")]),o("p",[t._v(t._s(t.writerinfo.follower_num))])]),o("div",{staticClass:"blog-writer-list"},[o("p",[t._v("粉丝")]),o("p",[t._v(t._s(t.writerinfo.followed_num))])]),o("div",{staticClass:"blog-writer-list"},[o("p",[t._v("获赞")]),o("p",[t._v(t._s(t.star_num))])])]),"unfollowed"==t.follow?[o("el-button",{attrs:{type:"danger",plain:""},on:{click:t.followed}},[t._v("关注")])]:t._e(),"followed"==t.follow?[o("el-button",{attrs:{type:"danger"},on:{click:t.unfollowed}},[t._v("已关注")])]:t._e(),o("el-button",{attrs:{type:"danger",plain:""}},[t._v("私信")])],2),o("div",{staticClass:"blog-content"},[o("h1",[t._v(t._s(t.bloginfo.blog_name))]),o("h3",[t._v(t._s(t.writerinfo.user))]),o("p",{domProps:{innerHTML:t._s(t.bloginfo.blog_text)}}),o("div",{staticClass:"blog-content-btn clearfix"},[o("div",{staticClass:"blog-btn-box",on:{click:t.like}},[o("i",{staticClass:"el-icon-star-off"}),t._v(" 点赞"+t._s(t.star_num)+" ")]),o("div",{staticClass:"blog-btn-box"},[t._v("浏览量"+t._s(t.bloginfo.blogLookNum))])]),o("div",{staticClass:"write-comment"},[o("img",{attrs:{src:t.userinfo.img,alt:""}}),o("el-input",{model:{value:t.comment,callback:function(a){t.comment=a},expression:"comment"}}),o("el-button",{attrs:{size:"small",type:"danger"},on:{click:t.writeComment}},[t._v("评论")])],1),t._l(t.blogcomments,(function(a,e){return o("div",{key:e,staticClass:"blog-comment"},[o("img",{attrs:{src:a.img,alt:""}}),o("span",[t._v(t._s(a.commentAuthorName))]),o("p",[t._v(t._s(a.cmt_content))])])}))],2)])])},s=[],l=(o("57bd"),o("365c")),i={data(){return{star_num:0,follow:"unfollowed",writerimg:"",blogID:0,bloginfo:{title:"测试标题1",content:"lalalalalalallalaaaaaaaaaaaaaaassssssssssssssssssssssssssssssssssssslkkkkkkkkkkkkkkkkkkkkdfaaaaaaaaaaaaaaaaasdsadsddasd",user:"作者1",userID:123,blogID:123,blogLikesNum:12,blogLookNum:12,tag:"lalala",blogcomments:[{user:123,img:o("d8d7"),comment:"写的很好"}]},blogcomments:[],writerinfo:{user:"作者1",img:o("d8d7"),userID:123,concernsNum:321,fansNum:456,likesNum:789},comment:"说说你的看法……",userinfo:{user:"作者1",img:o("d8d7"),userID:123,concernsNum:321,fansNum:456,likesNum:789}}},methods:{followed(){let t=localStorage.getItem("token");l["a"].follow({type:"follow",data:{follower_id:t,followed_id:this.bloginfo.blog_author}}).then(t=>{0==t.data.status&&this.$router.go(0)})},unfollowed(){let t=localStorage.getItem("token");l["a"].follow({type:"unfollow",data:{follower_id:t,followed_id:this.bloginfo.blog_author}}).then(t=>{0==t.data.status&&this.$router.go(0)})},like(){l["a"].star({type:"star",data:{blog_id:this.blogID}}).then(t=>{this.star_num++})},writeComment(){let t=localStorage.getItem("token");l["a"].blogcmt({type:"blog_cmt",data:{blog_id:this.blogID,cmter_id:t,content:this.comment}}).then(t=>{console.log(t),this.$router.go(0)})}},created(){this.blogID=this.$route.params.blogID;let t=localStorage.getItem("token");l["a"].blogid({type:"blog",data:{blog_id:this.blogID}}).then(a=>{console.log(a),this.bloginfo=a.data.data[0],l["a"].infoSearch({type:"user_info",data:{user_id:this.bloginfo.blog_author}}).then(t=>{this.writerinfo=t.data.data}),l["a"].loadimg({type:"img",data:{user_id:this.bloginfo.blog_author}}).then(t=>{this.writerimg=t.data.data.base64}),l["a"].getinfo({type:"followed_num",data:{user_id:this.bloginfo.blog_author}}).then(t=>{this.writerinfo.followed_num=t.data.data.num}),l["a"].getinfo({type:"follower_num",data:{user_id:this.bloginfo.blog_author}}).then(t=>{this.writerinfo.follower_num=t.data.data.num}),l["a"].getinfo({type:"star_num",data:{user_id:this.bloginfo.blog_author}}).then(t=>{this.star_num=t.data.data.num}),l["a"].getFollow({type:"followinfo",data:{follower_id:t,followed_id:this.bloginfo.blog_author}}).then(t=>{console.log(t),this.follow=t.data.data.status,console.log(this.follow)})}),l["a"].getcmt({type:"blog_cmt",data:{blog_id:this.blogID}}).then(t=>{if(t.data.length>0){let o=t.data.map((t,a,o)=>(l["a"].infoSearch({type:"user_info",data:{user_id:t.cmter}}).then(a=>{t.commentAuthorName=a.data.data.nick_name}),l["a"].loadimg({type:"img",data:{user_id:t.cmter}}).then(a=>{t.img=a.data.data.base64}),t));var a=this;setTimeout((function(){a.blogcomments=o}),500)}}),l["a"].infoSearch({type:"user_info",data:{user_id:t}}).then(t=>{this.userinfo=t.data.data}),l["a"].loadimg({type:"img",data:{user_id:t}}).then(t=>{this.userinfo.img=t.data.data.base64})}},n=i,r=o("2877"),d=Object(r["a"])(n,e,s,!1,null,null,null);a["default"]=d.exports},d8d7:function(t,a,o){t.exports=o.p+"img/test.ecdbc70c.jpg"}}]);