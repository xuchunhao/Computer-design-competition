(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63ce7264"],{"21d1":function(e,t,a){},3565:function(e,t,a){},3967:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"basic-info"},[a("div",{staticClass:"container info-content"},[a("porotrait"),a("div",{staticClass:"info-fans clearfix"},[a("div",{staticClass:"info-fans-list"},[a("p",[e._v("关注")]),a("p",[e._v(e._s(e.userinfo.follower_num))])]),a("div",{staticClass:"info-fans-list"},[a("p",[e._v("粉丝")]),a("p",[e._v(e._s(e.userinfo.followed_num))])]),a("div",{staticClass:"info-fans-list"},[a("p",[e._v("获赞")]),a("p",[e._v(e._s(e.userinfo.star_num))])])]),a("div",{staticClass:"info-box"},[a("div",{staticClass:"info-list"},[e._v(" 账号： "),a("el-input",{attrs:{disabled:""},model:{value:e.userinfo.phone,callback:function(t){e.$set(e.userinfo,"phone",t)},expression:"userinfo.phone"}})],1),a("div",{staticClass:"info-list"},[e._v(" 姓名： "),a("el-input",{model:{value:e.userinfo.name,callback:function(t){e.$set(e.userinfo,"name",t)},expression:"userinfo.name"}})],1),a("div",{staticClass:"info-list"},[e._v(" 昵称： "),a("el-input",{model:{value:e.userinfo.nickname,callback:function(t){e.$set(e.userinfo,"nickname",t)},expression:"userinfo.nickname"}})],1),a("el-button",{on:{click:e.changeinfo}},[e._v("修改信息")])],1)],1)])},s=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"footerBtn"},[a("img",{staticClass:"btn-edit",attrs:{src:e.img,icon:"el-icon-edit"},on:{click:function(t){e.dialogVisible=!0}}}),e.attach.laterUrl?a("img",{staticClass:"preview",staticStyle:{width:"200px",height:"200px"},attrs:{src:e.attach.laterUrl}}):e._e(),a("el-dialog",{attrs:{title:"编辑头像",visible:e.dialogVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[a("el-row",[a("input",{staticClass:"el-button",staticStyle:{"margin-bottom":"15px"},attrs:{type:"file",id:"uploads",accept:"image/png, image/jpeg, image/gif, image/jpg"},on:{change:function(t){return e.uploadImg(t,1)}}})]),a("el-row",[a("el-col",{attrs:{span:16}},[a("vueCropper",{ref:"cropper",staticStyle:{width:"100%",height:"300px"},attrs:{img:e.attach.customaryUrl,autoCrop:e.options.autoCrop,fixedBox:e.options.fixedBox,canMoveBox:e.options.canMoveBox,autoCropWidth:e.options.autoCropWidth,autoCropHeight:e.options.autoCropHeight,centerBox:e.options.centerBox,fixed:e.options.fixed},on:{realTime:e.realTime}})],1),a("el-col",{attrs:{span:8}},[a("h2",{attrs:{align:"center"}},[e._v("头像预览")]),a("div",{staticClass:"show-preview"},[a("div",{staticClass:"preview",style:e.previews.div},[a("img",{style:e.previews.img,attrs:{src:e.previews.url}})])])])],1),a("el-row",{staticClass:"footerBtn",attrs:{align:"center"}},[a("el-button",{staticClass:"btn-content",attrs:{type:"primary",size:"small",round:""},on:{click:function(t){return e.cut("blob")}}},[e._v("确认")]),a("el-button",{staticClass:"btn-content",attrs:{type:"primary",size:"small",round:""},on:{click:e.handleClose}},[e._v("取消")])],1)],1)])],1)},n=[],r=a("7e79"),l=a("365c"),c={components:{VueCropper:r["VueCropper"]},data(){return{img:a("d8d7"),dialogVisible:!1,options:{autoCrop:!0,fixedBox:!1,canMoveBox:!0,autoCropWidth:200,autoCropHeight:200,centerBox:!1,fixed:!0},previews:{},attach:{id:"",userId:"",customaryUrl:"",laterUrl:"",attachType:"photo"},fileName:"",uploadImgRelaPath:""}},methods:{handleClose(){this.dialogVisible=!1},realTime(e){this.previews=e},uploadImg(e,t){var a=e.target.files[0];if(!/\.(gif|jpg|jpeg|png|bmp|GIF|JPG|PNG)$/.test(e.target.value))return this.$message.error("图片类型必须是.gif,jpeg,jpg,png,bmp中的一种"),!1;var i=new FileReader;i.readAsDataURL(a),i.onload=e=>{let t=e.target.result;this.attach.customaryUrl=t}},cut(e){let t=localStorage.getItem("token");this.$refs.cropper.getCropData(e=>{l["a"].upimg({type:"img",data:{user_id:t,base64:e}}).then(e=>{console.log(e)})})}},created(){let e=localStorage.getItem("token");l["a"].loadimg({type:"img",data:{user_id:e}}).then(e=>{this.img=e.data.data.base64})}},u=c,p=(a("fab4"),a("2877")),d=Object(p["a"])(u,o,n,!1,null,"513b9c2c",null),f=d.exports,m=(a("3565"),{components:{porotrait:f},data(){return{userinfo:{user:"作者1",img:a("d8d7"),concernsNum:321,fansNum:456,likesNum:789,phone:123456,name:123,nickname:123}}},methods:{changeinfo(){let e=localStorage.getItem("token"),t={user_id:e,real_name:this.userinfo.name,nick_name:this.userinfo.nickname};l["a"].infoChange({type:"modify",data:t}).then(e=>{0==e.data.status?this.$message({message:"修改成功",type:"success",offset:100}):this.$message({message:"修改失败",type:"error",offset:100})},e=>{})}},created(){let e=localStorage.getItem("token");l["a"].infoSearch({type:"user_info",data:{user_id:e}}).then(e=>{let t=e.data.data;this.userinfo.phone=t.phone,this.userinfo.name=t.real_name,this.userinfo.nickname=t.nick_name},e=>{console.log(e)}),l["a"].getinfo({type:"followed_num",data:{user_id:e}}).then(e=>{this.userinfo.followed_num=e.data.data.num}),l["a"].getinfo({type:"follower_num",data:{user_id:e}}).then(e=>{this.userinfo.follower_num=e.data.data.num}),l["a"].getinfo({type:"star_num",data:{user_id:e}}).then(e=>{this.userinfo.star_num=e.data.data.num})}}),g=m,h=Object(p["a"])(g,i,s,!1,null,null,null);t["default"]=h.exports},d8d7:function(e,t,a){e.exports=a.p+"img/test.ecdbc70c.jpg"},fab4:function(e,t,a){"use strict";var i=a("21d1"),s=a.n(i);s.a}}]);